---
layout: post
title:  "Blinking a LED with the MSP430"
date:   2013-11-06 20:12:46
tags: msp430
---

---
TODO MSP430 intro

[MSP430] (http://en.wikipedia.org/wiki/TI_MSP430)

![MSP430]({{ site.url }}/images/msp430-leb-blink.jpg)

180 Ohm resistor

TODO energia sketch

blink.c

``` c
#include <msp430g2453.h>

int main(void) {
  WDTCTL = WDTPW + WDTHOLD; // Stop watchdog timer
  P1DIR = 0x01; // Set pin to output, 0b00000001

  for (;;) {
    volatile unsigned int i;
    P1OUT ^= 0x01; // toggle LED1 (P1.0) on/off, 0b00000001
    i = 50000;
    do (i--);
    while (i != 0);
  }
}
```


---

Makefile

```
CC=msp430-gcc
CFLAGS=-Os -Wall -g -mmcu=msp430g2553

OBJS=main.o


all: $(OBJS)
        $(CC) $(CFLAGS) -o main.elf $(OBJS)

%.o: %.c
        $(CC) $(CFLAGS) -c $<

clean:
        rm -fr main.elf $(OBJS)
```

TODO fritzing circuit diagram

```
$ make
$ mspdebug rf2500
```

```
(mspdebug) prog main.elf
Erasing...
Programming...
Writing  108 bytes at c000 [section: .text]...
Writing   32 bytes at ffe0 [section: .vectors]...
Done, 140 bytes total
```

```
(mspdebug) exit
```





---
